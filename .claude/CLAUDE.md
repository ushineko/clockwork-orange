# Project-Specific Guidelines: clockwork-orange

This file extends the global AIQ-Ralph configuration (`~/.claude/CLAUDE.md`).

---

## Project Overview

- **Type**: Desktop application (GUI + CLI)
- **Language**: Python 3.10+
- **Platforms**: KDE Plasma 6 (Linux), Windows 10/11
- **Framework**: PyQt6 for GUI
- **Purpose**: Wallpaper and lock screen management with plugin system

---

## Relaxed Rules

### Release Safety: Simplified

**Justification**: This is a desktop application with no backend databases, APIs, or infrastructure. Schema migrations and multi-phase rollouts do not apply.

**What this means**:
- Document rollback approach (revert commit, reinstall previous version)
- Skip formal Expand-Migrate-Contract checklists
- Skip ringed rollout planning
- Focus on: Can users easily revert to previous version if needed?

---

## Additional Rules

### Platform-Specific Testing

When making changes:
- Test on Windows if modifying `platform_utils.py` or Windows-specific code
- Test GUI changes with PyQt6
- Run `--self-test` on frozen executables after build changes

### Build Verification

Before releasing Windows builds:
1. Run `.\scripts\build_windows.ps1` (debug build)
2. Execute `.\dist\clockwork-orange.exe --self-test`
3. Verify all imports pass, especially platform-specific ones

---

## Environment

- **Python**: 3.10+ (3.12 for development)
- **Package Manager**: pip (from requirements.txt)
- **Build Tool**: PyInstaller for Windows executables
- **GUI Framework**: PyQt6

### Key Dependencies
- PyQt6 (GUI)
- Pillow (image processing)
- requests (network)
- PyYAML (configuration)
- watchdog (file system monitoring)
- pywin32 (Windows-specific features)

---

## Release Safety

Stack-specific guidance enabled:
- [x] None (desktop application)

Rollback documentation: **Simplified**
- For code changes: Revert commit, redeploy
- For releases: Users reinstall previous version from GitHub Releases

---

## Security Extensions

### Additional Checks for This Project

- **No network credentials**: API keys (Wallhaven, etc.) should use config files, not hardcoded
- **Safe file operations**: Validate paths for wallpaper sources, avoid path traversal
- **Plugin security**: Plugins should not execute arbitrary code from network sources

---

## Configuration Summary

| Category | Setting | Notes |
|----------|---------|-------|
| Validation Reports | Strict | Required before every commit |
| Code Quality Checks | Strict | Always check for dead code, duplication |
| Test Requirements | Strict | Tests must pass |
| Communication Style | Strict | Factual language, no superlatives |
| Tool Installation | Strict | Always ask before installing |
| Git Standards | Strict | Conventional commits, connectivity checks |
| Release Safety | **Simplified** | Desktop app, no backend infrastructure |
| Security | Mandatory | CVE scanning, OWASP checks |

---

*Generated by /ralph-setup on 2026-02-01*
